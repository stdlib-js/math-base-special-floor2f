{"version":3,"file":"index.mjs","sources":["../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2026 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isnanf from '@stdlib/math-base-assert-is-nanf';\nimport isInfinitef from '@stdlib/math-base-assert-is-infinitef';\nimport powf from '@stdlib/math-base-special-powf';\nimport floorf from '@stdlib/math-base-special-floorf';\nimport ceilf from '@stdlib/math-base-special-ceilf';\nimport log2 from '@stdlib/math-base-special-log2';\nimport f32 from '@stdlib/number-float64-base-to-float32';\nimport MAX_EXP from '@stdlib/constants-float32-max-base2-exponent';\nimport MIN_EXP_SUBNORMAL from '@stdlib/constants-float32-min-base2-exponent-subnormal';\nimport NINF from '@stdlib/constants-float32-ninf';\n\n\n// VARIABLES //\n\nvar ZERO = f32( 0.0 );\nvar TWO = f32( 2.0 );\nvar ONE = f32( 1.0 );\n\n\n// MAIN //\n\n/**\n* Rounds a single-precision floating point number to the nearest power of two toward negative infinity.\n*\n* @param {number} x - input value\n* @returns {number} rounded value\n*\n* @example\n* var v = floor2f( 3.141592653589793 );\n* // returns 2.0\n*\n* @example\n* var v = floor2f( 13.0 );\n* // returns 8.0\n*\n* @example\n* var v = floor2f( -0.314 );\n* // returns -0.5\n*/\nfunction floor2f( x ) {\n\tvar sign;\n\tvar p;\n\tx = f32( x );\n\tif (\n\t\tisnanf( x ) ||\n\t\tisInfinitef( x ) ||\n\t\tx === ZERO\n\t) {\n\t\treturn x;\n\t}\n\tif ( x < ZERO ) {\n\t\tx = -x;\n\t\tsign = -ONE;\n\t} else {\n\t\tsign = ONE;\n\t}\n\t// Solve the equation `2^p = x` for `p`:\n\tp = f32( log2( x ) );\n\n\t// If provided the smallest subnormal, no rounding possible:\n\tif ( p === MIN_EXP_SUBNORMAL ) {\n\t\treturn f32( sign * x );\n\t}\n\t// Determine a power of two which rounds the input value toward negative infinity:\n\tif ( sign === ONE ) {\n\t\tp = floorf( p );\n\t} else {\n\t\tp = ceilf( p );\n\t}\n\t// Handle overflow:\n\tif ( p > MAX_EXP ) {\n\t\treturn NINF;\n\t}\n\treturn f32( sign * powf( TWO, p ) );\n}\n\n\n// EXPORTS //\n\nexport default floor2f;\n"],"names":["ZERO","f32","TWO","ONE","floor2f","x","sign","p","isnanf","isInfinitef","log2","MIN_EXP_SUBNORMAL","floorf","ceilf","MAX_EXP","NINF","powf"],"mappings":";;6/BAoCA,IAAIA,EAAOC,EAAK,GACZC,EAAMD,EAAK,GACXE,EAAMF,EAAK,GAuBf,SAASG,EAASC,GACjB,IAAIC,EACAC,EAEJ,OADAF,EAAIJ,EAAKI,GAERG,EAAQH,IACRI,EAAaJ,IACbA,IAAML,EAECK,GAEHA,EAAIL,GACRK,GAAKA,EACLC,GAAQH,GAERG,EAAOH,GAGRI,EAAIN,EAAKS,EAAML,OAGJM,EACHV,EAAKK,EAAOD,IAInBE,EADID,IAASH,EACTS,EAAQL,GAERM,EAAON,IAGHO,EACDC,EAEDd,EAAKK,EAAOU,EAAMd,EAAKK,IAC/B"}